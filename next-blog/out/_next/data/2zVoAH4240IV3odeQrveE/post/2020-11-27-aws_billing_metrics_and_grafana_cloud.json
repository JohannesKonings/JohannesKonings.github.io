{"pageProps":{"frontmatter":{"layout":"post","title":"How to display AWS billing metrics in Grafana Cloud","date":"2020-11-27 08:15:18","summary":"Configuration of Grafana Cloud to display AWS billing metrics","categories":"aws","thumbnail":"grafana","tags":["aws","grafana"]},"content":"\n# Why Grafana for AWS billing metrics?\n\n[Grafana](https://grafana.com/) is well known for observability dashboards, which can be composed of many data sources.\n\nWith AWS CloudWatch metrics, it is possible to do more or less the same, but it is designed more for one account and more for the AWS metrics.\n\nIn Grafana, it's easy to use different data sources so that you can have your billing metrics on the same dashboard as your other technical and business metrics from elsewhere.\n\n# Configuration of the Grafana Cloud instance\n\nHere [https://grafana.com/products/cloud/](https://grafana.com/products/cloud/) you can sign up for a Grafana Cloud account.\n\nIt's free for this use case (and many more :))\n\n![Grafana Cloud pricing]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_pricing.png)\n\nAfter login, create a stack with the starter plan.\n\n![Grafana Cloud add stack]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_add_stack.png)\n\n![Grafana Cloud starter plan]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_starter_plan.png)\n\nThen log in to your instance.\n\n![Grafana Cloud instance login]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_instance_login.png)\n\n# Creation of an IAM user for the CloudWatch data source\n\nThe CloudWatch data source needs an access key and a secret key. Therefore is an IAM user needed. As policy can be this used: \n\n[https://grafana.com/docs/grafana/latest/datasources/cloudwatch/#iam-policies](https://grafana.com/docs/grafana/latest/datasources/cloudwatch/#iam-policies)\n\n# Configuration of the CloudWatch Datasource\n\nThe next step is to add the CloudWatch data source to your Grafana cloud instance.\n\n![Grafana Cloud add datasource]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_add_datasource.png)\n\n![Grafana Cloud select cloudwatch datasource]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_select_cloudwatch_datasource.png)\n\nAs for credentials, use the access key and secret key from the IAM user.\n\n![Grafana Cloud configuration cloudwatch datasource]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_configuration_cloudwatch_datasource.png)\n\n# Creation of a dashboard with a graph panel\n\nNow you can use the data source in the panels of a dashboard.\n\n![Grafana Cloud create dashboard]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_create_dashboard.png)\n\n![Grafana Cloud add panel]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_add_panel.png)\n\nThis is a panel configuration example for the costs of all linked accounts.\n\n![Grafana Cloud accounts panel]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_accounts_panel.png)\n\nThis should be considered:\n1. If the CloudWatch data source is not the default one, switch to the CloudWatch data source.\n2. Billing metrics are all in the region us-east-1\n3. The time frame \"this month\" seems the right choice for the monthly costs :)\n\nAnd ready to go ðŸŽ‰\n\n![Grafana Cloud created dashboard]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_created_dashboard.png)\n\n# Usage of a prepared dashboard\n\nHere [https://grafana.com/grafana/dashboards](https://grafana.com/grafana/dashboards) is a big list of official and community dashboards you can import to Grafana.\n\nYou can import a URL or ID from the list or, e.g., this [https://grafana.com/grafana/dashboards/13446](https://grafana.com/grafana/dashboards/13446) Dashboard in that way.\n\n![Grafana Cloud import dashboard]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_import_dashboard.png)\n\nThe selection of the data source is required.\n\n![Grafana Cloud import dashboard2]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_import_dashboard2.png)\n\nAnd ready to go ðŸŽ‰\n\n![Grafana Cloud imported dashboard]({{ site.baseurl }}/img/2020-11-27-aws_billing_metrics_and_grafana_cloud/grafana_cloud_imported_dashboard.png)\n\n\n# more dashboards\n\nMonitoring Artist has many more cloud watch dashboards: [https://grafana.com/orgs/monitoringartist](https://grafana.com/orgs/monitoringartist)\n\n\n"},"__N_SSG":true}